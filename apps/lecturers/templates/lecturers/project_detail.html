{% extends 'lecturers/base.html' %}
{% load i18n %}
{% load bootstrap3 %}

{# Panel header #}

{% block panel_heading %}
<div class="row">
    <div class="col-sm-6 col-xs-6">
        <h3 class="panel-title" style="padding-top: 8px; padding-bottom: 8px;">{% trans "Project details" %}</h3>
    </div>
    <div class="col-sm-6 col-xs-6">
        <span class="pull-right">
        {% if project.lecturer == user.lecturer %}
            <a href="{% url 'lecturers:modify_project' selectedCourse.code project.pk %}" class="btn btn-primary"> {% bootstrap_icon "edit" %}
                {% trans "Edit" %}</a>
            <a href="{% url 'lecturers:project_copy' selectedCourse.code project.pk %}" class="btn btn-primary"> {% bootstrap_icon "duplicate" %}
                {% trans "Create a copy" %}</a>
        {% endif %}
        </span>
    </div>
</div>
{% endblock %}

{# Panel content #}

{% block panel_content %}
<div class="panel-body">
    <div>
        <h4>{% trans "Title" %}</h4>
        {{ project.title }}
    </div>
    <div>
        <h4>{% trans "Description" %}</h4>
        {{ project.description }}
    </div>
    <h4>{% trans "Team assigned" %}:</h4>
    <ul>
        {% with members=project.team_assigned.team_members %}
            {% if members %}
                <li>
                {% for member in members %}
                        <a href="mailto:{{ member.user.email }}">{{ member }}</a>,
                {% endfor %}
                </li>
            {% else %}
                <br>
            {% endif %}
        {% endwith %}
    </ul>

    {% if project.status == "free" %}
        <h4>{% trans "Teams preferring this project" %}:</h4>
        <ol>
            {% for team in project.teams_with_preference %}
                <li>
                {% for member in team.team_members %}
                    <a href="mailto:{{ member.user.email }}">{{ member }}</a>,
                {% endfor %}
                </li>
            {% empty %}
                <br>
            {% endfor %}
        </ol>
    {% endif %}
</div>
{% endblock %}

{# Panel footer #}

{% block panel_footer %}
{% if project.lecturer == user.lecturer %}
    {% if project.status == "free" %}
        <form id="assign_form" action="{% url 'lecturers:assign_team' project.pk %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary" form="assign_form">
                {% bootstrap_icon "pencil" %} {% trans "Assign teams" %}
            </button>
        </form>
    {% else %}
        <form id="unassign_form" action="{% url 'lecturers:unassign_team' project.pk %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary" form="unassign_form">
                {% bootstrap_icon "ban-circle" %} {% trans "Unassign team" %}
            </button>
        </form>

    {% endif %}
{% endif %}
{% endblock %}
