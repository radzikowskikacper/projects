{% extends 'lecturers/base.html' %}
{% load i18n %}

{% block content %}
    {% load bootstrap3 %}
    <div>
        <h4>{% trans "Title" %}</h4>
        {{ project.title }}
    </div>
    <div>
        <h4>{% trans "Description" %}</h4>
        {{ project.description }}
    </div>
    {% if project.lecturer == user.lecturer %}
    <br>
    <a href="{% url "lecturers:modify_project" project.pk %}" class="btn btn-primary"> {% bootstrap_icon "edit" %}
        {% trans "Edit" %}</a>
    <br>
    <br>
    {% endif %}
    <h4>{% trans "Team assigned" %}:</h4>
    <ul>
        <li>
        {% for member in project.team_assigned.team_members %}
                <a href="mailto:{{ member.user.email }}">{{ member.user.username }}</a>,
        {% empty %}
            <p>{% trans "No team is assigned to the project." %}</p>
        {% endfor %}
        </li>
    </ul>

    {% if project.status == "free" %}
        <h4>{% trans "Teams preferring this project" %}:</h4>
        <ol>
            {% for team in project.teams_with_preference %}
                <li>
                {% for member in team.team_members %}
                    <a href="mailto:{{ member.user.email }}">{{ member.user.username }}</a>,
                {% endfor %}
                </li>
            {% empty %}
                <p>{% trans "No team picked the project." %}</p>
            {% endfor %}
        </ol>

        {% if project.lecturer == user.lecturer %}
            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
            </br>
            <form id="assign_form" action="{% url 'lecturers:assign_team' project.pk %}" method="post">
                {% csrf_token %}
                {% buttons %}
                    <button type="submit" class="btn btn-primary">
                        {% bootstrap_icon "pencil" %} {% trans "Assign teams" %}
                    </button>
                {% endbuttons %}
            </form>
        {% endif %}

{# For purpose of testing only! #}
    {% else %}
        <form id="assign_form" action="{% url 'lecturers:unassign_team' project.pk %}" method="post">
            {% csrf_token %}
            {% buttons %}
                <button type="submit" class="btn btn-primary">
                    {% bootstrap_icon "ban-circle" %} {% trans "Unassign team" %}
                </button>
            {% endbuttons %}
        </form>
{# end of form for testing only #}

    {% endif %}
{% endblock %}
