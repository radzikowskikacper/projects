{% extends "lecturers/base.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% block content %}

    {% include "common/messages.html" %}

    <form class="navbar-form navbar-right"
          role="search"
          action="{% url 'lecturers:filtered_project_list' %}"
          method="get">
        <div class="form-group">
            <input class="form-control" type="text"
                   name="title"
                   id="search_project"
                   placeholder={% trans "Project title..." %}
                   />
            <button type="submit" class="btn btn-default">
                <span> {% bootstrap_icon "search" %} </span>
            </button>
        </div>

    </form>
    <h2>{% trans "My Projects" %}</h2>
    <form action="{% url 'lecturers:project_delete' %}" method="post">
        {% csrf_token %}
        <table class="table table-striped">
            <tr>
                <th>{% trans "Delete" %}</th>
                <th>{% trans "Title" %}</th>
                <th>{% trans "Has teams" %}</th>
                <th>{% trans "Status" %}</th>
            </tr>
            {% for project in projects %}
                <tr>
                    <td>
                        {% if project.lecturer == user.lecturer and project.status == "free" %}
                            <input type="checkbox" name="to_delete" id="{{ project.pk }}"
                                   value="{{ project.pk }}"/>
                        {% endif %}
                    </td>
                    <td><a href="{% url 'lecturers:project' project.pk %}">{{ project.title }}</a></td>
                    <td>{% if project.teams_with_preference %} {% trans "yes" %} {% else %} {% trans "no" %} {% endif %}</td>
                    <td>{% if project.status == "free" %} {% trans "free" %} {% else %} {% trans "occupied" %} {% endif %}</td>
                </tr>
            {% endfor %}
        </table>
        {% buttons %}
            <button type="submit" class="btn btn-primary">
                {% bootstrap_icon "remove" %} {% trans "Delete" %}
            </button>
        {% endbuttons %}
    </form>
    <form id="assign_all_form" action="{% url 'lecturers:assign_teams_to_projects' %}" method="post">
        {% csrf_token %}
        {% buttons %}
            <button type="submit" class="btn btn-primary">
                {% bootstrap_icon "pencil" %} {% trans "Assign teams" %}
            </button>
        {% endbuttons %}
    </form>
    </br>
{% endblock %}
